{"version":3,"file":"rednax-core.js","sources":["ng://@rednax/core/src/lib/tokens.ts","ng://@rednax/core/src/lib/utils/shallowEqual.ts","ng://@rednax/core/src/lib/utils/areOptionsEqual.ts","ng://@rednax/core/src/lib/internal/Reconnector.ts","ng://@rednax/core/src/lib/internal/createTargetConnector.ts","ng://@rednax/core/src/lib/internal/register-target.ts","ng://@rednax/core/src/lib/internal/createSourceConnector.ts","ng://@rednax/core/src/lib/internal/register-source.ts","ng://@rednax/core/src/lib/internal/invariant.ts","ng://@rednax/core/src/lib/utils/areCollectsEqual.ts","ng://@rednax/core/src/lib/internal/scheduleMicroTaskAfter.ts","ng://@rednax/core/src/lib/internal/connection-factory.ts","ng://@rednax/core/src/lib/internal/drag-layer-connection.ts","ng://@rednax/core/src/lib/internal/createSourceMonitor.ts","ng://@rednax/core/src/lib/internal/createTargetFactory.ts","ng://@rednax/core/src/lib/internal/createTargetMonitor.ts","ng://@rednax/core/src/lib/internal/createSourceFactory.ts","ng://@rednax/core/src/lib/connector.service.ts","ng://@rednax/core/src/lib/dnd.directive.ts","ng://@rednax/core/src/lib/dnd.module.ts","ng://@rednax/core/public-api.ts","ng://@rednax/core/rednax-core.ts"],"sourcesContent":["/**\n * @module Misc\n */\n/** */\n\nimport { DragDropManager, Backend } from 'dnd-core';\nimport { InjectionToken } from '@angular/core';\n\n/** The injection token for the dnd-core compatible backend currently in use. */\nexport const DRAG_DROP_BACKEND = new InjectionToken<Backend>(\n    'dnd-core compatible backend'\n);\n\n/** The injection token for the dnd-core compatible backend's options. */\nexport const DRAG_DROP_BACKEND_OPTIONS = new InjectionToken<any>(\n    'options for dnd-core compatible backend'\n);\n\n/** The injection token for the dnd-core compatible backend currently in use. */\nexport const DRAG_DROP_BACKEND_DEBUG_MODE = new InjectionToken<any>(\n    'should dnd-core run in debug mode?'\n);\n\n/** The injection token for the dnd-core DragDropManager */\nexport const DRAG_DROP_MANAGER = new InjectionToken<DragDropManager>(\n    'dnd-core DragDropManager'\n);\n\n/** The injection token for the dnd-core compatible backend currently in use. */\nexport const DRAG_DROP_GLOBAL_CONTEXT = new InjectionToken<any>(\n    'dnd-core context'\n);\n\n/** The type a source or target is given as a marker for 'you supplied null as a type',\n *  so that library consumers can be reminded to use setType/setTypes manually.\n *  See {@link DragSource#setType}, {@link DropTarget#setTypes}.\n */\nexport const TYPE_DYNAMIC: symbol = Symbol(\n    'no type specified, you must provide one with setType/setTypes'\n);\n","export function shallowEqual(objA: any, objB: any) {\n  if (objA === objB) {\n    return true;\n  }\n\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  const hasOwn = Object.prototype.hasOwnProperty;\n  for (let i = 0; i < keysA.length; i += 1) {\n    if (!hasOwn.call(objB, keysA[i]) ||\n        objA[keysA[i]] !== objB[keysA[i]]) {\n      return false;\n    }\n\n    const valA = objA[keysA[i]];\n    const valB = objB[keysA[i]];\n\n    if (valA !== valB) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","import { shallowEqual } from './shallowEqual';\n\nexport default function areOptionsEqual(nextOptions: any, currentOptions: any) {\n  if (currentOptions === nextOptions) {\n    return true;\n  }\n\n  return currentOptions !== null &&\n         nextOptions !== null &&\n         shallowEqual(currentOptions, nextOptions);\n}\n","import { Unsubscribe, Identifier } from 'dnd-core';\nimport areOptionsEqual from '../utils/areOptionsEqual';\n\nexport class Reconnector<O = any> {\n    handlerId: any;\n    node?: Node;\n    options?: O;\n    disconnect?: Unsubscribe | null;\n    constructor(\n        private backendConnector: (handlerId: any, node: Node, options?: O) => Unsubscribe\n    ) {}\n    reconnect = (parentHandlerId: Identifier | null) => {\n        if (this.disconnect) {\n            this.disconnect();\n            this.disconnect = null;\n        }\n        this.handlerId = parentHandlerId;\n        if (this.handlerId && this.node) {\n            this.disconnect = this.backendConnector(this.handlerId, this.node, this.options);\n        }\n    }\n    hook = (nativeElement: Node, options?: O) => {\n        if (nativeElement === this.node &&\n            areOptionsEqual(options, this.options)) {\n            return;\n        }\n\n        this.node = nativeElement;\n        this.options = options;\n\n        this.reconnect(this.handlerId);\n    }\n}\n","import { Backend, Identifier } from 'dnd-core';\nimport { DropTargetConnector } from '../connectors';\nimport { Connector } from './createSourceConnector';\nimport { Reconnector } from './Reconnector';\n\nexport class TargetConnector implements Connector<DropTargetConnector> {\n    private currentHandlerId: any;\n\n    private dropTarget = new Reconnector<void>(\n        (handlerId, node, options) => {\n            return this.backend.connectDropTarget(handlerId, node, options);\n        }\n    );\n\n    constructor(private backend: Backend) {}\n\n    public receiveHandlerId(handlerId: Identifier | null) {\n        if (handlerId === this.currentHandlerId) {\n            return;\n        }\n        this.currentHandlerId = handlerId;\n        this.dropTarget.reconnect(handlerId);\n    }\n\n    public hooks: DropTargetConnector = {\n        dropTarget: this.dropTarget.hook\n    };\n\n    public reconnect() {\n        this.dropTarget.reconnect(this.currentHandlerId);\n    }\n}\n\nexport default function createTargetConnector(backend: Backend) {\n    return new TargetConnector(backend);\n}\n","import { DragDropManager, DropTarget } from 'dnd-core';\n\nexport default function registerTarget(type: any, target: DropTarget, manager: DragDropManager) {\n  const registry = manager.getRegistry();\n  const targetId = registry.addTarget(type, target);\n\n  function unregisterTarget() {\n    registry.removeTarget(targetId);\n  }\n\n  return {\n    handlerId: targetId,\n    unregister: unregisterTarget,\n  };\n}\n","import { Backend, Identifier } from 'dnd-core';\nimport { DragSourceConnector } from '../connectors';\nimport { Reconnector } from './Reconnector';\nimport { DragPreviewOptions, DragSourceOptions } from '../connectors'\n\nexport interface Connector<TConnector> {\n    hooks: TConnector;\n    receiveHandlerId(handlerId: Identifier | null): void;\n    reconnect(): void;\n}\n\nexport class SourceConnector implements Connector<DragSourceConnector> {\n    private currentHandlerId: any;\n\n    private dragSource = new Reconnector<DragSourceOptions>(\n        (handlerId, node, options) => {\n            return this.backend.connectDragSource(handlerId, node, options);\n        }\n    );\n    private dragPreview = new Reconnector<DragPreviewOptions>(\n        (handlerId, node, options) => {\n            return this.backend.connectDragPreview(handlerId, node, options);\n        }\n    );\n\n    constructor(private backend: Backend) {}\n\n    public receiveHandlerId(handlerId: Identifier | null) {\n        if (handlerId === this.currentHandlerId) {\n            return;\n        }\n        this.currentHandlerId = handlerId;\n        this.dragSource.reconnect(handlerId);\n        this.dragPreview.reconnect(handlerId);\n    }\n\n    public hooks: DragSourceConnector = {\n        dragSource: this.dragSource.hook,\n        dragPreview: this.dragPreview.hook,\n    };\n\n    public reconnect() {\n        this.dragSource.reconnect(this.currentHandlerId);\n        this.dragPreview.reconnect(this.currentHandlerId);\n    }\n}\n\nexport default function createSourceConnector(backend: Backend) {\n    return new SourceConnector(backend);\n}\n","import { DragDropManager, DragSource } from 'dnd-core';\n\nexport default function registerSource(type: any, source: DragSource, manager: DragDropManager) {\n  const registry = manager.getRegistry();\n  const sourceId = registry.addSource(type, source);\n\n  function unregisterSource() {\n    registry.removeSource(sourceId);\n  }\n\n  return {\n    handlerId: sourceId,\n    unregister: unregisterSource,\n  };\n}\n","export function invariant(assertion: boolean, msg: string) {\n  if (!assertion) {\n    throw new Error(msg);\n  }\n}\n\n","import { shallowEqual } from './shallowEqual';\n\nexport function areCollectsEqual(a: any, b: any) {\n  if (a == null || b == null) {\n    return false;\n  }\n  if (typeof a !== 'object' || typeof b !== 'object') {\n    return a === b;\n  }\n\n  return shallowEqual(a, b);\n}\n","import { Observable, TeardownLogic, Subscriber, Operator } from 'rxjs';\n\n/**\n * @ignore\n * This is an RxJS operator to schedule a microtask just after all\n * the synchronous subscribers have been processed.\n * It's useful because we use `microTasks !== 0` to determine when we are finished\n * processing all the listeners and are ready for Angular to perform change detection.\n */\n\nexport function scheduleMicroTaskAfter<T>(zone: Zone, uTask?: () => void) {\n    return (source: Observable<T>): Observable<T> => {\n        return source.lift(new RunInZoneOperator(zone, uTask));\n    };\n}\n\n/**\n * @ignore\n */\nexport class ZoneSubscriber<T> extends Subscriber<T> {\n    constructor(destination: Subscriber<T>, private zone: Zone, private uTask: () => void = (() => {})) {\n        super(destination);\n    }\n    protected _next(val: T) {\n        this.destination.next && this.destination.next(val);\n        this.zone.scheduleMicroTask('ZoneSubscriber', this.uTask);\n    }\n}\n\n/**\n * @ignore\n */\nexport class RunInZoneOperator<T, R> implements Operator<T, R> {\n    constructor(private zone: Zone, private uTask?: () => void) { }\n    call(subscriber: Subscriber<R>, source: any): TeardownLogic {\n        return source.subscribe(new ZoneSubscriber(subscriber, this.zone, this.uTask));\n    }\n}\n","import { Backend, DragDropManager } from 'dnd-core';\nimport { NgZone } from '@angular/core';\nimport { invariant } from './invariant';\nimport { TypeOrTypeArray } from '../type-ish';\nimport {\n    Subscription,\n    Observable,\n    ReplaySubject,\n    BehaviorSubject,\n    TeardownLogic\n} from 'rxjs';\nimport { TYPE_DYNAMIC } from '../tokens';\n\nimport { take, map, distinctUntilChanged, switchMapTo } from 'rxjs/operators';\n\nimport { areCollectsEqual } from '../utils/areCollectsEqual';\n\nimport { DropTargetMonitor } from '../target-monitor';\nimport { DragSourceMonitor } from '../source-monitor';\nimport * as t from '../connection-types';\nimport {\n    DropTargetConnector,\n    DragSourceConnector,\n    DragSourceOptions,\n    DragPreviewOptions\n} from '../connectors';\nimport { Connector } from './createSourceConnector';\nimport { scheduleMicroTaskAfter } from './scheduleMicroTaskAfter';\n\nexport interface FactoryArgs<TMonitor, TConnector> {\n    createHandler: (handlerMonitor: any) => any;\n    createMonitor: (manager: DragDropManager) => TMonitor;\n    createConnector: (\n        backend: Backend\n    ) => Connector<TConnector>;\n    registerHandler: (\n        type: any,\n        handler: any,\n        manager: DragDropManager\n    ) => {\n        handlerId: any;\n        unregister: Subscription | Function;\n    };\n}\n\nexport class Connection<TMonitor extends DragSourceMonitor | DropTargetMonitor, TConnector> {\n    // immutable after instantiation\n    private readonly handlerMonitor: any;\n    private readonly handlerConnector: Connector<TConnector>;\n    private readonly handler: any;\n\n    /** The stream of all change events from the internal subscription's handleChange */\n    private readonly collector$: BehaviorSubject<TMonitor>;\n    /** A subject basically used to kick off any observables waiting for a type to be set via setType/setTypes */\n    private readonly resolvedType$ = new ReplaySubject<any>(1);\n\n    // mutable state\n    private currentType?: TypeOrTypeArray;\n    private handlerId: any;\n\n    /**\n     * This one is created and destroyed once per type or list of types.\n     * Because each time we change the type, we unsubscribe from the global state storage and\n     * re-subscribe with the new type.\n     */\n    private subscriptionTypeLifetime?: Subscription;\n\n    /**\n     * This one lives exactly as long as the connection.\n     * It is responsible for disposing of the handlerConnector, and any internal listen() subscriptions.\n     */\n    private subscriptionConnectionLifetime = new Subscription();\n\n    constructor(\n        private factoryArgs: FactoryArgs<TMonitor, TConnector>,\n        private manager: DragDropManager,\n        private skyhookZone: Zone,\n        initialType: TypeOrTypeArray | undefined\n    ) {\n        invariant(\n            typeof manager === 'object',\n            // TODO: update this mini-documentation\n            'Could not find the drag and drop manager in the context of %s. ' +\n            'Make sure to wrap the top-level component of your app with DragDropContext. '\n            // tslint:disable-next-line:max-line-length\n            // 'Read more: ',\n        );\n        NgZone.assertNotInAngularZone();\n\n        this.handlerMonitor = this.factoryArgs.createMonitor(this.manager);\n        this.collector$ = new BehaviorSubject(this.handlerMonitor);\n        this.handler = this.factoryArgs.createHandler(this.handlerMonitor);\n        this.handlerConnector = this.factoryArgs.createConnector(\n            this.manager.getBackend()\n        );\n        // handlerConnector lives longer than any per-type subscription\n        this.subscriptionConnectionLifetime.add(() =>\n            this.handlerConnector.receiveHandlerId(null)\n        );\n\n        if (initialType && initialType !== TYPE_DYNAMIC) {\n            this.setTypes(initialType);\n        }\n    }\n\n    listen<P>(mapFn: (monitor: TMonitor) => P): Observable<P> {\n        // Listeners are generally around as long as the connection.\n        // This isn't 100% true, but there is no way of knowing (even if you ref-count it)\n        // when a component no longer needs it.\n        return this.resolvedType$.pipe(\n            // this ensures we don't start emitting values until there is a type resolved\n            take(1),\n            // switch our attention to the incoming firehose of 'something changed' events\n            switchMapTo(this.collector$),\n            // turn them into 'interesting state' via the monitor and a user-provided function\n            map(mapFn),\n            // don't emit EVERY time the firehose says something changed, only when the interesting state changes\n            distinctUntilChanged(areCollectsEqual),\n            // this schedules a single batch change detection run after all the listeners have heard their newest value\n            // thus all changes resulting from subscriptions to this are caught by the\n            // change detector.\n            scheduleMicroTaskAfter(this.skyhookZone, this.onUpdate)\n        );\n    }\n\n    private onUpdate = () => {\n        this.handlerConnector.reconnect();\n    };\n\n    connect(fn: (connector: TConnector) => void): Subscription {\n        const subscription = this.resolvedType$.pipe(take(1)).subscribe(() => {\n            // must run inside skyhookZone, so things like timers firing after a long hover with touch backend\n            // will cause change detection (via executing a macro or event task)\n            this.skyhookZone.run(() => {\n                fn(this.handlerConnector.hooks);\n            });\n        });\n        // now chain this onto the connection's unsubscribe call.\n        // just in case you destroy your component before setting a type on anything\n        // i.e.:\n        // conn without a type\n        //     source = this.dnd.dragSource(null, { ... })\n        // manually connect to the DOM, which won't handle the returned subscription like the directive does\n        //     ngAfterViewInit() { this.source.connectDragSource(this.myDiv.nativeElement); }\n        // never set a type\n        // then destroy your component, the source, but not the connection request.\n        //     ngOnDestroy() { this.source.unsubscribe(); }\n        //\n        // without this, you would have a hanging resolvedType$.pipe(take(1)) subscription\n        // with this, it dies with the source's unsubscribe call.\n        //\n        // doesn't need this.subscriptionTypeLifetime, because pipe(take(1)) already does that\n        this.subscriptionConnectionLifetime.add(subscription);\n        return subscription;\n    }\n\n    connectDropTarget(node: Node): Subscription {\n        return this.connect(c =>\n            ((c as any) as DropTargetConnector).dropTarget(node)\n        );\n    }\n\n    connectDragSource(\n        node: Node,\n        options: DragSourceOptions\n    ): Subscription {\n        return this.connect(c =>\n            ((c as any) as DragSourceConnector).dragSource(node, options)\n        );\n    }\n\n    connectDragPreview(\n        node: Node,\n        options: DragPreviewOptions\n    ): Subscription {\n        return this.connect(c =>\n            ((c as any) as DragSourceConnector).dragPreview(node, options)\n        );\n    }\n\n    setTypes(type: TypeOrTypeArray) {\n        // must run inside skyhookZone, so things like timers firing after a long hover with touch backend\n        // will cause change detection (via executing a macro or event task)\n        this.skyhookZone.run(() => {\n            this.receiveType(type);\n            this.resolvedType$.next(1);\n        });\n    }\n\n    setType(type: string | symbol) {\n        this.setTypes(type);\n    }\n\n    getHandlerId() {\n        return this.handlerId;\n    }\n\n    receiveType(type: TypeOrTypeArray) {\n        if (type === this.currentType) {\n            return;\n        }\n\n        NgZone.assertNotInAngularZone();\n\n        this.currentType = type;\n\n        if (this.subscriptionTypeLifetime) {\n            this.subscriptionTypeLifetime.unsubscribe();\n        }\n        // console.debug('subscribed to ' + type.toString());\n        this.subscriptionTypeLifetime = new Subscription();\n\n        const { handlerId, unregister } = this.factoryArgs.registerHandler(\n            type,\n            this.handler,\n            this.manager\n        );\n\n        this.handlerId = handlerId;\n        this.handlerMonitor.receiveHandlerId(handlerId);\n        this.handlerConnector.receiveHandlerId(handlerId);\n\n        const globalMonitor = this.manager.getMonitor();\n        const unsubscribe = globalMonitor.subscribeToStateChange(\n            this.handleChange,\n            { handlerIds: [handlerId] }\n        );\n\n        this.subscriptionTypeLifetime.add(unsubscribe);\n        this.subscriptionTypeLifetime.add(unregister);\n        // this.subscriptionTypeLifetime.add(() => console.debug(\"unsubscribed from \" + type.toString()));\n    }\n\n    private handleChange = () => {\n        this.collector$.next(this.handlerMonitor);\n    };\n\n    unsubscribe() {\n        if (this.subscriptionTypeLifetime) {\n            this.subscriptionTypeLifetime.unsubscribe();\n        }\n        this.subscriptionConnectionLifetime.unsubscribe();\n    }\n\n    add(teardown: TeardownLogic): Subscription {\n        return this.subscriptionConnectionLifetime.add(teardown);\n    }\n\n    get closed() {\n        return (\n            this.subscriptionConnectionLifetime &&\n            this.subscriptionConnectionLifetime.closed\n        );\n    }\n}\n\nexport interface SourceConstructor<Item = {}, DropResult = {}> {\n    new (\n        factoryArgs: FactoryArgs<DragSourceMonitor, DragSourceConnector>,\n        manager: DragDropManager,\n        skyhookZone: Zone,\n        initialType: string | symbol | undefined\n    ): t.DragSource<Item, DropResult>;\n}\nexport interface TargetConstructor {\n    new (\n        factoryArgs: FactoryArgs<DropTargetMonitor, DropTargetConnector>,\n        manager: DragDropManager,\n        skyhookZone: Zone,\n        initialType: TypeOrTypeArray | undefined\n    ): t.DropTarget;\n}\n\nexport const TargetConnection = Connection as TargetConstructor;\nexport const SourceConnection = Connection as SourceConstructor;\n","import { Subscription, Observable, BehaviorSubject, TeardownLogic } from 'rxjs';\nimport { DragDropManager, Unsubscribe } from 'dnd-core';\nimport { DragLayer } from '../connection-types';\nimport { DragLayerMonitor } from '../layer-monitor';\nimport { areCollectsEqual } from '../utils/areCollectsEqual';\nimport { map, distinctUntilChanged } from 'rxjs/operators';\nimport { scheduleMicroTaskAfter } from './scheduleMicroTaskAfter';\n\nexport class DragLayerConnectionClass implements DragLayer {\n\n  unsubscribeFromOffsetChange: Unsubscribe;\n  unsubscribeFromStateChange: Unsubscribe;\n  private readonly collector$: BehaviorSubject<DragLayerMonitor>;\n  private subscription = new Subscription();\n\n\n  constructor(private manager: DragDropManager, private zone: Zone) {\n    const monitor = this.manager.getMonitor();\n    this.collector$ = new BehaviorSubject<DragLayerMonitor>(monitor);\n    this.unsubscribeFromOffsetChange = monitor.subscribeToOffsetChange(\n      this.handleOffsetChange\n    );\n    this.unsubscribeFromStateChange = monitor.subscribeToStateChange(\n      this.handleStateChange\n    );\n\n    this.subscription.add(() => {\n      this.unsubscribeFromOffsetChange();\n      this.unsubscribeFromStateChange();\n    });\n\n    this.handleStateChange();\n  }\n\n  isTicking = false;\n\n  private handleStateChange = () => {\n    const monitor = this.manager.getMonitor() as DragLayerMonitor;\n    this.collector$.next(monitor);\n  }\n  private handleOffsetChange = () => {\n    const monitor = this.manager.getMonitor() as DragLayerMonitor;\n    this.collector$.next(monitor);\n  }\n\n  listen<P>(mapFn: (monitor: DragLayerMonitor) => P): Observable<P> {\n    return this.collector$.pipe(\n      map(mapFn),\n      distinctUntilChanged(areCollectsEqual),\n      scheduleMicroTaskAfter(this.zone)\n    );\n  }\n\n  unsubscribe() {\n    this.collector$.complete();\n    this.subscription.unsubscribe();\n  }\n\n  add(teardown: TeardownLogic): Subscription {\n    return this.subscription.add(teardown);\n  }\n\n  get closed() {\n    return this.subscription.closed;\n  }\n\n}\n\n","import { DragDropMonitor, Identifier } from 'dnd-core';\nimport { DragSourceMonitor } from '../source-monitor';\nimport { invariant } from './invariant';\n\nlet isCallingCanDrag = false;\nlet isCallingIsDragging = false;\n\n\nclass DragSourceMonitorClass implements DragSourceMonitor {\n    internalMonitor: DragDropMonitor;\n    sourceId: Identifier | undefined;\n\n    constructor(manager: any) {\n        this.internalMonitor = manager.getMonitor();\n    }\n\n    receiveHandlerId(sourceId: Identifier | undefined) {\n        this.sourceId = sourceId;\n    }\n\n    canDrag() {\n        invariant(\n            !isCallingCanDrag,\n            'You may not call monitor.canDrag() inside your canDrag() implementation. ' +\n            'Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html',\n        );\n\n        try {\n            isCallingCanDrag = true;\n            return this.internalMonitor.canDragSource(this.sourceId);\n        } finally {\n            isCallingCanDrag = false;\n        }\n    }\n\n    isDragging() {\n        invariant(\n            !isCallingIsDragging,\n            'You may not call monitor.isDragging() inside your isDragging() implementation. ' +\n            'Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html',\n        );\n\n        try {\n            isCallingIsDragging = true;\n            return this.internalMonitor.isDraggingSource(this.sourceId);\n        } finally {\n            isCallingIsDragging = false;\n        }\n    }\n\n    getItemType() {\n        return this.internalMonitor.getItemType();\n    }\n\n    getItem(): {} & any {\n        return this.internalMonitor.getItem();\n    }\n\n    getDropResult() {\n        return this.internalMonitor.getDropResult();\n    }\n\n    didDrop() {\n        return this.internalMonitor.didDrop();\n    }\n\n    getInitialClientOffset() {\n        return this.internalMonitor.getInitialClientOffset();\n    }\n\n    getInitialSourceClientOffset() {\n        return this.internalMonitor.getInitialSourceClientOffset();\n    }\n\n    getSourceClientOffset() {\n        return this.internalMonitor.getSourceClientOffset();\n    }\n\n    getClientOffset() {\n        return this.internalMonitor.getClientOffset();\n    }\n\n    getDifferenceFromInitialOffset() {\n        return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n}\n\nexport function createSourceMonitor(manager: any): DragSourceMonitor {\n    return new DragSourceMonitorClass(manager);\n}\n","import { DropTarget } from 'dnd-core';\nimport { DropTargetMonitor } from '../target-monitor';\nimport { DropTargetSpec } from '../drop-target-specification';\n\nexport class Target implements DropTarget {\n\n    constructor(\n        private spec: DropTargetSpec,\n        private zone: Zone,\n        private monitor: DropTargetMonitor\n    ) {\n        this.monitor = monitor;\n    }\n\n    withChangeDetection<T>(fn: () => T): T {\n        let x = fn();\n        this.zone.scheduleMicroTask('DropTarget', () => { });\n        return x;\n    }\n\n    receiveMonitor(monitor: any) {\n        this.monitor = monitor;\n    }\n\n    canDrop() {\n        if (!this.spec.canDrop) {\n            return true;\n        }\n\n        // don't run isDragging in the zone. Should be a pure function of `this`.\n        return this.spec.canDrop(this.monitor);\n    }\n\n    hover() {\n        if (!this.spec.hover) {\n            return;\n        }\n        this.withChangeDetection(() => {\n            this.spec.hover && this.spec.hover(this.monitor);\n        });\n    }\n\n    drop() {\n        if (!this.spec.drop) {\n            return undefined;\n        }\n\n        return this.withChangeDetection(() => {\n            const dropResult = this.spec.drop && this.spec.drop(this.monitor);\n            return dropResult;\n        });\n    }\n}\n\nexport function createTargetFactory(spec: DropTargetSpec, zone: Zone): any {\n    return function createTarget(monitor: any): DropTarget {\n        return new Target(spec, zone, monitor);\n    };\n}\n","import { invariant } from './invariant';\nimport { DragDropMonitor, Identifier } from 'dnd-core';\nimport { DropTargetMonitor } from '../target-monitor';\n\nlet isCallingCanDrop = false;\n\nclass DropTargetMonitorClass implements DropTargetMonitor {\n    internalMonitor: DragDropMonitor;\n    targetId: Identifier | undefined;\n\n    constructor(manager: any) {\n        this.internalMonitor = manager.getMonitor();\n    }\n\n    receiveHandlerId(targetId: Identifier | undefined) {\n        this.targetId = targetId;\n    }\n\n    canDrop(): boolean {\n        invariant(\n            !isCallingCanDrop,\n            'You may not call monitor.canDrop() inside your canDrop() implementation. ' +\n            'Read more: http://react-dnd.github.io/react-dnd/docs-drop-target-monitor.html',\n        );\n\n        try {\n            isCallingCanDrop = true;\n            return this.internalMonitor.canDropOnTarget(this.targetId);\n        } finally {\n            isCallingCanDrop = false;\n        }\n    }\n\n    isOver(options = { shallow: false }): boolean {\n        return this.internalMonitor.isOverTarget(this.targetId, options);\n    }\n\n    getItemType() {\n        return this.internalMonitor.getItemType();\n    }\n\n    getItem(): {} & any {\n        return this.internalMonitor.getItem();\n    }\n\n    getDropResult() {\n        return this.internalMonitor.getDropResult();\n    }\n\n    didDrop(): boolean {\n        return this.internalMonitor.didDrop();\n    }\n\n    getInitialClientOffset() {\n        return this.internalMonitor.getInitialClientOffset();\n    }\n\n    getInitialSourceClientOffset() {\n        return this.internalMonitor.getInitialSourceClientOffset();\n    }\n\n    getSourceClientOffset() {\n        return this.internalMonitor.getSourceClientOffset();\n    }\n\n    getClientOffset() {\n        return this.internalMonitor.getClientOffset();\n    }\n\n    getDifferenceFromInitialOffset() {\n        return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n}\n\nexport function createTargetMonitor(manager: any): DropTargetMonitor {\n    return new DropTargetMonitorClass(manager);\n}\n","import { DragSource } from 'dnd-core';\nimport { DragSourceSpec } from '../drag-source-specification';\nimport { DragSourceMonitor } from '../source-monitor';\n\nexport class Source implements DragSource {\n    constructor(\n        private spec: DragSourceSpec<any>,\n        private zone: Zone,\n        private monitor: DragSourceMonitor<any, any>,\n    ) {\n    }\n\n    withChangeDetection<T>(fn: () => T): T {\n        let x = fn()\n        this.zone.scheduleMicroTask('DragSource', () => { });\n        return x;\n    }\n\n    canDrag() {\n        if (!this.spec.canDrag) {\n            return true;\n        }\n\n        return this.withChangeDetection(() => {\n            return this.spec.canDrag && this.spec.canDrag(this.monitor) || false;\n        });\n    }\n\n    isDragging(globalMonitor: any, sourceId: any) {\n        if (!this.spec.isDragging) {\n            return sourceId === globalMonitor.getSourceId();\n        }\n\n        return this.spec.isDragging(this.monitor);\n    }\n\n    beginDrag() {\n        return this.withChangeDetection(() => {\n            return this.spec.beginDrag(this.monitor);\n        });\n    }\n\n    endDrag() {\n        if (!this.spec.endDrag) {\n            return;\n        }\n\n        return this.withChangeDetection(() => {\n            if (this.spec.endDrag) {\n                this.spec.endDrag(this.monitor);\n            }\n        });\n    }\n}\n\nexport function createSourceFactory(spec: DragSourceSpec<any>, zone: Zone) {\n    return function createSource(monitor: DragSourceMonitor): DragSource {\n        return new Source(spec, zone, monitor);\n    }\n}\n","/**\n * @module 1-Top-Level\n */\n/** a second comment */\n\n/// <reference types=\"zone.js\" />\nimport { Injectable, Inject, NgZone } from '@angular/core';\nimport { TYPE_DYNAMIC, DRAG_DROP_MANAGER } from './tokens';\nimport { DragDropManager } from 'dnd-core';\n\nimport { DropTargetSpec } from './drop-target-specification';\nimport createTargetConnector from './internal/createTargetConnector';\nimport registerTarget from './internal/register-target';\n\nimport { DragSourceSpec } from './drag-source-specification';\nimport createSourceConnector from './internal/createSourceConnector';\nimport registerSource from './internal/register-source';\n\nimport { SubscriptionLike, TeardownLogic } from 'rxjs';\nimport { TypeOrTypeArray } from './type-ish';\nimport {\n    // sourceConnectionFactory,\n    // targetConnectionFactory,\n    SourceConnection,\n    TargetConnection,\n} from './internal/connection-factory';\nimport { DragLayerConnectionClass } from './internal/drag-layer-connection';\n\nimport { DragSource, DropTarget, DragLayer } from './connection-types';\nimport { createSourceMonitor } from './internal/createSourceMonitor';\nimport { createTargetFactory } from './internal/createTargetFactory';\nimport { createTargetMonitor } from './internal/createTargetMonitor';\nimport { createSourceFactory } from './internal/createSourceFactory';\n\n/**\n * Represents an RxJS Subscription, with multi-version compatibility.\n * The standard SubscriptionLike does not contain an add() method.\n */\nexport interface AddSubscription extends SubscriptionLike {\n    /** Same as RxJS `Subscription#add` */\n    add(teardownLogic: TeardownLogic): AddSubscription;\n}\n\n/** For a simple component, unsubscribing is as easy as `connection.unsubscribe()` in `ngOnDestroy()`\n *  If your components have lots of subscriptions, it can get tedious having to\n *  unsubscribe from all of them, and you might forget. A common pattern is to create an RxJS Subscription\n *  (maybe called `destroy`), to use `this.destroy.add(xxx.subscribe(...))`\n *  and to call `destroy.unsubscribe()` once to clean up all of them. @rednax/core\n *  supports this pattern with by using the `subscription` parameter on the\n *  constructors. Simply:\n *\n```typescript\nimport { Subscription } from 'rxjs';\n// ...\ndestroy = new Subscription();\ntarget = this.dnd.dropTarget({\n  // ...\n}, this.destroy);\nngOnDestroy() { this.destroy.unsubscribe(); }\n```\n *\n * It is a good habit for avoiding leaked subscriptions, because .\n */\n\n@Injectable()\nexport class SkyhookDndService {\n    /** @ignore */\n    private skyhookZone: Zone = Zone.root.fork({\n        name: 'skyhookZone',\n        onHasTask: (_parentZoneDelegate, _currentZone, _targetZone, state) => {\n            // when we've | drained the microTask queue; or                    | ... run a change detection cycle.\n            //            | executed or cancelled a macroTask (eg a timer); or |\n            //            | handled an event                                   |\n\n            // note: we must use ngZone.run() instead of ApplicationRef.tick()\n            // this is because\n            // 1. this callback runs outside the angular zone\n            // 2. therefore if you use appRef.tick(), the event handlers set up during the tick() are\n            //    not in the angular zone, even though anything set up during tick() should be\n            // 3. therefore you get regular (click) handlers from templates running in skyhookZone\n            //    and not causing change detection\n\n            // Also, now we watch for macroTasks as well.\n            // This means if we set up timers in the skyhook zone, they will fire and cause change\n            // detection. Useful if doing .listen(...).delay(1000) and the resulting asynchronous\n            // subscribers.\n            // Appropriately, we run more setup handlers in skyhookZone now.\n            //\n            // Proper event handlers (set up by the backend) don't trigger any, because skyhookZone\n            // only cares about # of handlers changing => 0. But if we care about them, it will be\n            // through listen(), updates to which will schedule a microTask.\n\n            if (!state[state.change]) {\n                this.ngZone.run(() => {\n                    // noop, but causes change detection (i.e. onLeave)\n                });\n            }\n        },\n        // onInvokeTask: (zoneDelegate, currentZone, targetZone, task, applyThis, applyArgs) => {\n        // }\n        // onScheduleTask(parentZoneDelegate, currentZone, targetZone, task) {\n        //   return parentZoneDelegate.scheduleTask(targetZone, task);\n        // },\n        // onInvoke: (parentZoneDelegate, currentZone, targetZone, delegate, applyThis, applyArgs, source) => {\n        // }\n    });\n\n    /** @ignore */\n    constructor(\n        @Inject(DRAG_DROP_MANAGER) private manager: DragDropManager,\n        private ngZone: NgZone\n    ) {}\n\n    /**\n     * This drop target will only react to the items produced by the drag sources\n     * of the specified type or types.\n     *\n     * If you want a dynamic type, pass `null` as the type; and call\n     * {@link DropTarget#setTypes} in a lifecycle hook.\n     */\n    public dropTarget<Item = {}, DropResult = {}>(\n        types: TypeOrTypeArray | null,\n        spec: DropTargetSpec<Item, DropResult>,\n        subscription?: AddSubscription\n    ): DropTarget<Item, DropResult> {\n        // return this.ngZone.runOutsideAngular(() => {\n        return this.skyhookZone.run(() => {\n            const createTarget: any = createTargetFactory(\n                spec,\n                this.skyhookZone\n            );\n\n            const conn: any = new TargetConnection(\n                {\n                    createHandler: createTarget,\n                    registerHandler: registerTarget,\n                    createMonitor: createTargetMonitor,\n                    createConnector: createTargetConnector,\n                },\n                this.manager,\n                this.skyhookZone,\n                types || TYPE_DYNAMIC\n            );\n\n            if (subscription) {\n                subscription.add(conn);\n            }\n            return conn;\n        });\n    }\n\n    /** This method creates a {@link DragSource} object. It represents a drag\n     *  source and its behaviour, and can be connected to a DOM element by\n     *  assigning it to the `[dragSource]` directive on that element in your\n     *  template.\n     *\n     * It is the corollary of [`react-dnd`'s\n     * `DragSource`](http://react-dnd.github.io/react-dnd/docs-drag-source.html).\n     *\n     * The `spec` argument ({@link DragSourceSpec}) is a set of _queries_ and\n     * _callbacks_ that are called at appropriate times by the internals. The\n     * queries are for asking your component whether to drag/listen and what\n     * item data to hoist up; the callback (just 1) is for notifying you when\n     * the drag ends.\n     *\n     * Only the drop targets registered for the same type will\n     * react to the items produced by this drag source. If you want a dynamic\n     * type, pass `null` as the type; and call {@link DragSource#setType} in\n     * a lifecycle hook.\n     *\n     * @param subscription An RxJS Subscription to tie the lifetime of the\n     * connection to.\n     */\n\n    public dragSource<Item, DropResult = {}>(\n        type: string | symbol | null,\n        spec: DragSourceSpec<Item, DropResult>,\n        subscription?: AddSubscription\n    ): DragSource<Item, DropResult> {\n        // return this.ngZone.runOutsideAngular(() => {\n        return this.skyhookZone.run(() => {\n            const createSource = createSourceFactory(spec, this.skyhookZone);\n            const conn = new SourceConnection(\n                {\n                    createHandler: createSource,\n                    registerHandler: registerSource,\n                    createMonitor: createSourceMonitor,\n                    createConnector: createSourceConnector,\n                },\n                this.manager,\n                this.skyhookZone,\n                type || TYPE_DYNAMIC\n            );\n            if (subscription) {\n                subscription.add(conn);\n            }\n            return conn;\n        });\n    }\n\n    /**\n     * This method creates a {@link DragLayer} object\n     */\n    public dragLayer<Item = any>(\n        subscription?: AddSubscription\n    ): DragLayer<Item> {\n        // return this.ngZone.runOutsideAngular(() => {\n        return this.skyhookZone.run(() => {\n            const conn = new DragLayerConnectionClass(\n                this.manager,\n                this.skyhookZone\n            );\n            if (subscription) {\n                subscription.add(conn);\n            }\n            return conn;\n        });\n    }\n}\n","import {\n  Directive,\n  ElementRef,\n  Input,\n  NgZone\n} from '@angular/core';\n\nimport { invariant } from './internal/invariant';\n\nimport { DropTarget, DragSource } from './connection-types';\nimport { DragSourceOptions, DragPreviewOptions } from './connectors';\nimport { Subscription } from 'rxjs';\nimport { TypeOrTypeArray } from './type-ish';\n\n/** @ignore */\nconst explanation =\n  'You can only pass exactly one connection object to [dropTarget]. ' +\n  'There is only one of each source/target/preview allowed per DOM element.'\n  ;\n\n/**\n * @ignore\n */\n@Directive({\n    selector: '[abstractDndDirective]'\n})\nexport class DndDirective {\n  protected connection: any;\n  private deferredRequest = new Subscription();\n  /** @ignore */\n  constructor(protected elRef: ElementRef, private zone: NgZone) { }\n  protected ngOnChanges() {\n    invariant(\n      typeof this.connection === 'object' && !Array.isArray(this.connection),\n      explanation\n    );\n    this.zone.runOutsideAngular(() => {\n      // discard an unresolved connection request\n      // in the case where the previous one succeeded, deferredRequest is\n      // already closed.\n      this.deferredRequest.unsubscribe();\n      // replace it with a new one\n      if (this.connection) {\n        this.deferredRequest = this.callHooks(this.connection);\n      }\n    });\n  }\n  protected ngOnDestroy() { this.deferredRequest.unsubscribe(); }\n  // @ts-ignore\n  protected callHooks(conn: any): Subscription {\n    return new Subscription();\n  }\n}\n\n// Note: the T | undefined everywhere is from https://github.com/angular/angular-cli/issues/2034\n\n/**\n * Allows you to connect a {@link DropTarget} to an element in a component template.\n */\n@Directive({\n  selector: '[dropTarget]'\n})\nexport class DropTargetDirective extends DndDirective {\n  protected connection: DropTarget | undefined;\n\n  /** Which target to connect the DOM to */\n  @Input('dropTarget') public dropTarget!: DropTarget;\n  /** Shortcut for setting a type on the connection.\n   *  Lets you use Angular binding to do it. Runs {@link DropTarget#setTypes}. */\n  @Input('dropTargetTypes') dropTargetTypes?: TypeOrTypeArray;\n  /** Reduce typo confusion by allowing non-plural version of dropTargetTypes */\n  @Input('dropTargetType') set dropTargetType(t: TypeOrTypeArray) {\n    this.dropTargetTypes = t;\n  }\n\n  protected ngOnChanges() {\n    this.connection = this.dropTarget;\n    if (this.connection && this.dropTargetTypes != null) {\n      this.connection.setTypes(this.dropTargetTypes);\n    }\n    super.ngOnChanges();\n  }\n\n  protected callHooks(conn: DropTarget): Subscription {\n    return conn.connectDropTarget(this.elRef.nativeElement);\n  }\n}\n\n/**\n * Allows you to connect a {@link DragSource} to an element in a component template.\n */\n@Directive({\n  selector: '[dragSource]'\n})\nexport class DragSourceDirective extends DndDirective {\n  protected connection: DragSource<any> | undefined;\n\n  /** Which source to connect the DOM to */\n  @Input('dragSource') dragSource!: DragSource<any>;\n  /** Shortcut for setting a type on the connection.\n   *  Lets you use Angular binding to do it. Runs {@link DragSource#setType}. */\n  @Input('dragSourceType') dragSourceType?: string | symbol;\n  /** Pass an options object as you would to {@link DragSource#connectDragSource}. */\n  @Input('dragSourceOptions') dragSourceOptions?: DragSourceOptions;\n  /** Do not render an HTML5 preview. Only applies when using the HTML5 backend.\n   * It does not use { captureDraggingState: true } for IE11 support; that is broken.\n   */\n  @Input('noHTML5Preview') noHTML5Preview = false;\n\n  protected ngOnChanges() {\n    this.connection = this.dragSource;\n    if (this.connection && this.dragSourceType != null) {\n      this.connection.setType(this.dragSourceType);\n    }\n    super.ngOnChanges();\n  }\n\n  protected callHooks(conn: DragSource<any>): Subscription {\n    const sub = new Subscription();\n    sub.add(conn.connectDragSource(this.elRef.nativeElement, this.dragSourceOptions));\n    if (this.noHTML5Preview) {\n      sub.add(conn.connectDragPreview(getEmptyImage()));\n    }\n    return sub;\n  }\n\n}\n\n/**\n * Allows you to specify which element a {@link DragSource} should screenshot as an HTML5 drag preview.\n *\n * Only relevant when using the HTML5 backend.\n */\n@Directive({\n  selector: '[dragPreview]',\n  inputs: ['dragPreview', 'dragPreviewOptions']\n})\nexport class DragPreviewDirective extends DndDirective {\n  protected connection: DragSource<any> | undefined;\n  /** The drag source for which this element will be the preview. */\n  @Input('dragPreview') public dragPreview!: DragSource<any>;\n  /** Pass an options object as you would to {@link DragSource#connectDragPreview}. */\n  @Input('dragPreviewOptions') dragPreviewOptions?: DragPreviewOptions;\n\n  protected ngOnChanges() {\n    this.connection = this.dragPreview;\n    super.ngOnChanges();\n  }\n\n  protected callHooks(conn: DragSource<any>) {\n    return conn.connectDragPreview(this.elRef.nativeElement, this.dragPreviewOptions);\n  }\n}\n\n// import { getEmptyImage } from 'react-dnd-html5-backend';\n// we don't want to depend on the backend, so here that is, copied\n/** @ignore */\nlet emptyImage: HTMLImageElement;\n/**\n * Returns a 0x0 empty GIF for use as a drag preview.\n * @ignore\n * */\nfunction getEmptyImage() {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    emptyImage.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n  return emptyImage;\n}\n\n","import { NgModule, ModuleWithProviders, NgZone } from '@angular/core';\n\nimport { SkyhookDndService } from './connector.service';\nimport {\n    DndDirective,\n    DragSourceDirective,\n    DropTargetDirective,\n    DragPreviewDirective,\n} from './dnd.directive';\n\nimport {\n    DRAG_DROP_BACKEND,\n    DRAG_DROP_BACKEND_OPTIONS,\n    DRAG_DROP_BACKEND_DEBUG_MODE,\n    DRAG_DROP_MANAGER,\n    DRAG_DROP_GLOBAL_CONTEXT,\n} from './tokens';\n\nimport {\n    createDragDropManager,\n    BackendFactory,\n    DragDropManager,\n} from 'dnd-core';\n\nimport { invariant } from './internal/invariant';\n\n/** @ignore */\nexport function unpackBackendForEs5Users(backendOrModule: any) {\n    // Auto-detect ES6 default export for people still using ES5\n    let backend = backendOrModule;\n    if (typeof backend === 'object' && typeof backend.default === 'function') {\n        backend = backend.default;\n    }\n    invariant(\n        typeof backend === 'function',\n        'Expected the backend to be a function or an ES6 module exporting a default function. ' +\n            'Read more: http://react-dnd.github.io/react-dnd/docs-drag-drop-context.html'\n    );\n    return backend;\n}\n\n// TODO allow injecting window\n/** @ignore */\n// @dynamic\nexport function managerFactory(\n    backendFactory: BackendFactory,\n    zone: NgZone,\n    context: any,\n    backendOptions?: any,\n    debugMode?: boolean\n): DragDropManager {\n    backendFactory = unpackBackendForEs5Users(backendFactory);\n    return zone.runOutsideAngular(() =>\n        createDragDropManager(\n            backendFactory,\n            context,\n            backendOptions,\n            debugMode\n        )\n    );\n}\n\n/** @ignore */\ndeclare var global: any;\n/** @ignore */\nexport function getGlobalContext(): any {\n    return typeof global !== 'undefined' ? global : (window as any);\n}\n\n/*\n * Hold on, this gets a little confusing.\n *\n * A dnd-core Backend has lots of useful methods for registering elements and firing events.\n * However, backends are not distributed this way.\n * The HTML5Backend and the TestBackend, when imported { default as HTML5Backend }, are not Backends, they are\n * functions: (manager: DragDropManager) => Backend.\n * This is now known as a BackendFactory under dnd-core 4+ typescript annotations.\n *\n * However, Angular has its own conception of what a factory is for AOT. This is the 'factory'\n * to which BackendFactoryInput refers below.\n * Sometimes, users will want to preconfigure a backend (like TouchBackend, or MultiBackend).\n * For this, they need to export a function that returns a configured BackendFactory\n * and pass it in as  { backendFactory: exportedFunction }.\n */\n\n/** Use this for providing plain backends to {@link SkyhookDndModule#forRoot}. */\nexport interface BackendInput {\n    /** A plain backend, for example the HTML5Backend. */\n    backend: BackendFactory;\n    options?: any;\n    debug?: boolean;\n}\n\n/**\n * Use this for providing backends that need configuring before use to {@link SkyhookDndModule#forRoot}.\n *\n * For use with the MultiBackend:\n *\n * ```typescript\n * import { createDefaultMultiBackend } from '@rednax/multi-backend';\n * // ...\n * SkyhookDndModule.forRoot({ backendFactory: createDefaultMultiBackend })\n * ```\n *\n * or with the TouchBackend by itself:\n *\n * ```typescript\n * export function createTouchBackend() {\n *     return TouchBackend({ enableMouseEvents: false });\n * }\n * // ...\n * SkyhookDndModule.forRoot({ backendFactory: createTouchBackend })\n * ```\n *\n * You have to do this to retain AOT compatibility.\n */\nexport interface BackendFactoryInput {\n    /** See above. */\n    backendFactory: () => BackendFactory;\n    debug?: boolean;\n}\n\n/** @ignore */\nconst EXPORTS = [\n    DndDirective,\n    DragSourceDirective,\n    DropTargetDirective,\n    DragPreviewDirective,\n];\n\n// @dynamic\n@NgModule({\n    declarations: EXPORTS,\n    exports: EXPORTS,\n})\nexport class SkyhookDndModule {\n    static forRoot(\n        backendOrBackendFactory: BackendInput | BackendFactoryInput\n    ): ModuleWithProviders<any> {\n        return {\n            ngModule: SkyhookDndModule,\n            providers: [\n                {\n                    provide: DRAG_DROP_BACKEND,\n                    // whichever one they have provided, the other will be undefined\n                    useValue: (backendOrBackendFactory as BackendInput).backend,\n                    useFactory: (backendOrBackendFactory as BackendFactoryInput)\n                        .backendFactory,\n                },\n                {\n                    provide: DRAG_DROP_BACKEND_OPTIONS,\n                    // whichever one they have provided, the other will be undefined\n                    useValue: (backendOrBackendFactory as BackendInput).options,\n                },\n                {\n                    provide: DRAG_DROP_BACKEND_DEBUG_MODE,\n                    // whichever one they have provided, the other will be undefined\n                    useValue: backendOrBackendFactory.debug,\n                },\n                {\n                    provide: DRAG_DROP_GLOBAL_CONTEXT,\n                    useFactory: getGlobalContext,\n                },\n                {\n                    provide: DRAG_DROP_MANAGER,\n                    useFactory: managerFactory,\n                    deps: [\n                        DRAG_DROP_BACKEND,\n                        NgZone,\n                        DRAG_DROP_GLOBAL_CONTEXT,\n                        DRAG_DROP_BACKEND_OPTIONS,\n                        DRAG_DROP_BACKEND_DEBUG_MODE,\n                    ],\n                },\n                SkyhookDndService,\n            ],\n        };\n    }\n}\n","// import no symbols to get typings but not execute the monkey-patching module loader\n/// <reference path=\"src/lib/ambient.d.ts\" />\n\nexport {\n  SkyhookDndModule,\n  BackendInput,\n  BackendFactoryInput,\n} from './src/lib/dnd.module';\n\nexport { DragSourceMonitor } from './src/lib/source-monitor';\nexport { DropTargetMonitor } from './src/lib/target-monitor';\nexport { DragLayerMonitor } from './src/lib/layer-monitor';\n\n// the source, target and preview types\nexport { DropTarget, DragSource, DragLayer } from './src/lib/connection-types';\n\nexport { DragSourceOptions, DragPreviewOptions } from './src/lib/connectors';\n\nexport { DRAG_DROP_BACKEND, DRAG_DROP_MANAGER } from './src/lib/tokens';\n\n// direct API\nexport {\n  SkyhookDndService,\n  AddSubscription,\n} from './src/lib/connector.service';\nexport { DropTargetSpec } from './src/lib/drop-target-specification';\nexport { DragSourceSpec } from './src/lib/drag-source-specification';\n\nexport {\n  DndDirective,\n  DragSourceDirective,\n  DropTargetDirective,\n  DragPreviewDirective,\n} from './src/lib/dnd.directive';\n\nexport { Offset } from './src/lib/type-ish';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {getGlobalContext as ɵb,managerFactory as ɵa} from './src/lib/dnd.module';\nexport {DRAG_DROP_BACKEND_DEBUG_MODE as ɵd,DRAG_DROP_BACKEND_OPTIONS as ɵc,DRAG_DROP_GLOBAL_CONTEXT as ɵe} from './src/lib/tokens';"],"names":[],"mappings":"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"}