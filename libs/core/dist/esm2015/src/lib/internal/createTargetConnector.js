import { Reconnector } from './Reconnector';
export class TargetConnector {
    constructor(backend) {
        this.backend = backend;
        this.dropTarget = new Reconnector((handlerId, node, options) => {
            return this.backend.connectDropTarget(handlerId, node, options);
        });
        this.hooks = {
            dropTarget: this.dropTarget.hook
        };
    }
    receiveHandlerId(handlerId) {
        if (handlerId === this.currentHandlerId) {
            return;
        }
        this.currentHandlerId = handlerId;
        this.dropTarget.reconnect(handlerId);
    }
    reconnect() {
        this.dropTarget.reconnect(this.currentHandlerId);
    }
}
export default function createTargetConnector(backend) {
    return new TargetConnector(backend);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlVGFyZ2V0Q29ubmVjdG9yLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHJlZG5heC9jb3JlLyIsInNvdXJjZXMiOlsic3JjL2xpYi9pbnRlcm5hbC9jcmVhdGVUYXJnZXRDb25uZWN0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUU1QyxNQUFNLE9BQU8sZUFBZTtJQVN4QixZQUFvQixPQUFnQjtRQUFoQixZQUFPLEdBQVAsT0FBTyxDQUFTO1FBTjVCLGVBQVUsR0FBRyxJQUFJLFdBQVcsQ0FDaEMsQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFO1lBQ3pCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3BFLENBQUMsQ0FDSixDQUFDO1FBWUssVUFBSyxHQUF3QjtZQUNoQyxVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJO1NBQ25DLENBQUM7SUFacUMsQ0FBQztJQUVqQyxnQkFBZ0IsQ0FBQyxTQUE0QjtRQUNoRCxJQUFJLFNBQVMsS0FBSyxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7WUFDckMsT0FBTztTQUNWO1FBQ0QsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFNBQVMsQ0FBQztRQUNsQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBTU0sU0FBUztRQUNaLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3JELENBQUM7Q0FDSjtBQUVELE1BQU0sQ0FBQyxPQUFPLFVBQVUscUJBQXFCLENBQUMsT0FBZ0I7SUFDMUQsT0FBTyxJQUFJLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN4QyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFja2VuZCwgSWRlbnRpZmllciB9IGZyb20gJ2RuZC1jb3JlJztcbmltcG9ydCB7IERyb3BUYXJnZXRDb25uZWN0b3IgfSBmcm9tICcuLi9jb25uZWN0b3JzJztcbmltcG9ydCB7IENvbm5lY3RvciB9IGZyb20gJy4vY3JlYXRlU291cmNlQ29ubmVjdG9yJztcbmltcG9ydCB7IFJlY29ubmVjdG9yIH0gZnJvbSAnLi9SZWNvbm5lY3Rvcic7XG5cbmV4cG9ydCBjbGFzcyBUYXJnZXRDb25uZWN0b3IgaW1wbGVtZW50cyBDb25uZWN0b3I8RHJvcFRhcmdldENvbm5lY3Rvcj4ge1xuICAgIHByaXZhdGUgY3VycmVudEhhbmRsZXJJZDogYW55O1xuXG4gICAgcHJpdmF0ZSBkcm9wVGFyZ2V0ID0gbmV3IFJlY29ubmVjdG9yPHZvaWQ+KFxuICAgICAgICAoaGFuZGxlcklkLCBub2RlLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iYWNrZW5kLmNvbm5lY3REcm9wVGFyZ2V0KGhhbmRsZXJJZCwgbm9kZSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICApO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBiYWNrZW5kOiBCYWNrZW5kKSB7fVxuXG4gICAgcHVibGljIHJlY2VpdmVIYW5kbGVySWQoaGFuZGxlcklkOiBJZGVudGlmaWVyIHwgbnVsbCkge1xuICAgICAgICBpZiAoaGFuZGxlcklkID09PSB0aGlzLmN1cnJlbnRIYW5kbGVySWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRIYW5kbGVySWQgPSBoYW5kbGVySWQ7XG4gICAgICAgIHRoaXMuZHJvcFRhcmdldC5yZWNvbm5lY3QoaGFuZGxlcklkKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaG9va3M6IERyb3BUYXJnZXRDb25uZWN0b3IgPSB7XG4gICAgICAgIGRyb3BUYXJnZXQ6IHRoaXMuZHJvcFRhcmdldC5ob29rXG4gICAgfTtcblxuICAgIHB1YmxpYyByZWNvbm5lY3QoKSB7XG4gICAgICAgIHRoaXMuZHJvcFRhcmdldC5yZWNvbm5lY3QodGhpcy5jdXJyZW50SGFuZGxlcklkKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZVRhcmdldENvbm5lY3RvcihiYWNrZW5kOiBCYWNrZW5kKSB7XG4gICAgcmV0dXJuIG5ldyBUYXJnZXRDb25uZWN0b3IoYmFja2VuZCk7XG59XG4iXX0=