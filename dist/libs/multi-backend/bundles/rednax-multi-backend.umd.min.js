!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react-dnd-touch-backend"),require("react-dnd-html5-backend"),require("dnd-multi-backend"),require("@angular/core"),require("@angular/common"),require("@rednax/core"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@rednax/multi-backend",["exports","react-dnd-touch-backend","react-dnd-html5-backend","dnd-multi-backend","@angular/core","@angular/common","@rednax/core","rxjs/operators"],n):n(((e="undefined"!=typeof globalThis?globalThis:e||self).rednax=e.rednax||{},e.rednax["multi-backend"]={}),e.reactDndTouchBackend,e.reactDndHtml5Backend,e.dndMultiBackend,e.ng.core,e.ng.common,e.i1,e.rxjs.operators)}(this,(function(e,n,t,r,o,i,a,c){"use strict";var u={backends:[{backend:t.HTML5Backend,transition:r.MouseTransition},{backend:function(e,t){return n.TouchBackend(e,t,{enableMouseEvents:!1})},preview:!0,transition:r.TouchTransition}]};var d=function(){function e(e){this.skyhook=e,this.layer=this.skyhook.dragLayer(),this.collect$=this.layer.listen((function(e){return{initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset()}})),this.style$=this.collect$.pipe(c.map((function(e){var n=e.initialOffset,t=e.currentOffset;if(!n||!t)return{display:"none"};var r="translate("+t.x+"px, "+t.y+"px)";return{transform:r,WebkitTransform:r}})))}return e.prototype.ngOnDestroy=function(){this.layer.unsubscribe()},e}();function s(e,n){1&e&&o.ɵɵelementContainer(0)}d.ɵfac=function(e){return new(e||d)(o.ɵɵdirectiveInject(a.SkyhookDndService))},d.ɵcmp=o.ɵɵdefineComponent({type:d,selectors:[["skyhook-preview-renderer"]],ngContentSelectors:["*"],decls:3,vars:3,consts:[[1,"firefox-bug",3,"ngStyle"]],template:function(e,n){1&e&&(o.ɵɵprojectionDef(),o.ɵɵelementStart(0,"div",0),o.ɵɵpipe(1,"async"),o.ɵɵprojection(2),o.ɵɵelementEnd()),2&e&&o.ɵɵproperty("ngStyle",o.ɵɵpipeBind1(1,1,n.style$))},directives:[i.NgStyle],pipes:[i.AsyncPipe],styles:["[_nghost-%COMP%] {\n                display: block;\n                position: fixed;\n                pointer-events: none;\n                z-index: 100;\n                left: 0;\n                top: 0;\n                width: 100%;\n                height: 100%;\n            }\n            @keyframes animatedBorder {\n                from {\n                    border-color: rgba(0, 0, 0, 0);\n                }\n                to {\n                    border-color: rgba(0, 0, 0, 1);\n                }\n            }\n            .firefox-bug[_ngcontent-%COMP%] {\n                animation-name: animatedBorder;\n                animation-duration: 1s;\n                animation-iteration-count: infinite;\n                animation-timing-function: linear;\n            }"],changeDetection:0});var l=function(e,n,t){return{$implicit:e,type:n,item:t}};function p(e,n){if(1&e&&(o.ɵɵelementContainerStart(0),o.ɵɵtemplate(1,s,1,0,"ng-container",1),o.ɵɵelementContainerEnd()),2&e){var t=o.ɵɵnextContext(2).ngIf,r=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵproperty("ngTemplateOutlet",r.content)("ngTemplateOutletContext",o.ɵɵpureFunction3(2,l,t.itemType,t.itemType,t.item))}}function f(e,n){if(1&e&&(o.ɵɵelementStart(0,"skyhook-preview-renderer"),o.ɵɵtemplate(1,p,2,6,"ng-container",0),o.ɵɵelementEnd()),2&e){var t=o.ɵɵnextContext().ngIf;o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.isDragging)}}function m(e,n){if(1&e&&(o.ɵɵelementContainerStart(0),o.ɵɵtemplate(1,f,2,1,"skyhook-preview-renderer",0),o.ɵɵelementContainerEnd()),2&e){var t=n.ngIf;o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.previewEnabled)}}var y=function(){function e(e,n){var t=this;this.skyhook=e,this.manager=n,this.allBackends=!1,this.layer=this.skyhook.dragLayer(),this.collect$=this.layer.listen((function(e){return{item:e.getItem(),itemType:e.getItemType(),isDragging:e.isDragging(),previewEnabled:t.isPreviewEnabled()}})),this.warned=!1}return e.prototype.ngOnDestroy=function(){this.layer.unsubscribe()},e.prototype.warn=function(e){this.warned||console.warn(e),this.warned=!0},e.prototype.isPreviewEnabled=function(){if(this.allBackends)return!0;if(null==this.manager)return this.warn("no drag and drop manager defined, are you sure you imported SkyhookDndModule?"),!1;var e=this.manager.getBackend();return null==e?(this.warn("no drag and drop backend defined, are you sure you imported SkyhookDndModule.forRoot(backend)?"),!1):null==e.previewEnabled||e.previewEnabled()},e}();y.ɵfac=function(e){return new(e||y)(o.ɵɵdirectiveInject(a.SkyhookDndService),o.ɵɵdirectiveInject(a.DRAG_DROP_MANAGER))},y.ɵcmp=o.ɵɵdefineComponent({type:y,selectors:[["skyhook-preview"]],contentQueries:function(e,n,t){var r;(1&e&&o.ɵɵcontentQuery(t,o.TemplateRef,!0),2&e)&&(o.ɵɵqueryRefresh(r=o.ɵɵloadQuery())&&(n.content=r.first))},inputs:{allBackends:"allBackends"},decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(o.ɵɵtemplate(0,m,2,1,"ng-container",0),o.ɵɵpipe(1,"async")),2&e&&o.ɵɵproperty("ngIf",o.ɵɵpipeBind1(1,1,n.collect$))},directives:[i.NgIf,d,i.NgTemplateOutlet],pipes:[i.AsyncPipe],encapsulation:2,changeDetection:0});var g=function(){};g.ɵmod=o.ɵɵdefineNgModule({type:g}),g.ɵinj=o.ɵɵdefineInjector({factory:function(e){return new(e||g)},imports:[[i.CommonModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&o.ɵɵsetNgModuleScope(g,{declarations:[y,d],imports:[i.CommonModule],exports:[y,d]}),Object.defineProperty(e,"TouchBackend",{enumerable:!0,get:function(){return n.TouchBackend}}),Object.defineProperty(e,"HTML5Backend",{enumerable:!0,get:function(){return t.HTML5Backend}}),Object.defineProperty(e,"HTML5DragTransition",{enumerable:!0,get:function(){return r.HTML5DragTransition}}),Object.defineProperty(e,"MouseTransition",{enumerable:!0,get:function(){return r.MouseTransition}}),Object.defineProperty(e,"MultiBackend",{enumerable:!0,get:function(){return r.MultiBackend}}),Object.defineProperty(e,"TouchTransition",{enumerable:!0,get:function(){return r.TouchTransition}}),Object.defineProperty(e,"createTransition",{enumerable:!0,get:function(){return r.createTransition}}),e.HTML5ToTouch=u,e.SkyhookMultiBackendModule=g,e.SkyhookPreviewComponent=y,e.SkyhookPreviewRendererComponent=d,e.createDefaultMultiBackend=function(){return function(e,n){return r.MultiBackend(u)(e,n)}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=rednax-multi-backend.umd.min.js.map